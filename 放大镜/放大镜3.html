<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>放大镜3</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        #container{
            width: 1050px;
            height: 700px;
            position: relative;
            border: 1px solid #bcbcbc;
            margin: 80px auto;
        }
        #picture{
            float: left;
            width: 400px;
            height: 400px;
            position: relative;
            margin-top: 20px;
            margin-left: 20px;
        }
        #drag{
            width: 200px;
            height: 200px;
            background-color: #a9a7f4;
            opacity:  .4;
            position: absolute;
            left: 0px;
            top: 0;
            z-index: 10;
            display: none;
        }
        #big{
            float: left;
            width: 400px;
            height: 400px;
            position: relative;
            margin-left: 20px;
            margin-top: 20px;
            left: 0px;
            top: 0px;
            overflow: hidden;
            display: none;
            z-index: 1;
        }
        #big-picture{
            float: left;
            width: 800px;
            height: 800px;
            position: relative;
            left: 0px;
            top: 0px;
        }
        #content{
            width: 548px;
            height: 398px;
            float: left;
            position: absolute;
            margin-left: 440px;
            margin-top: 20px;
            top: 0;
            left: 0;
            border: 1px solid #bcbcbc;
        }
        #small{
            width: 300px;
            height: 50px;
            background-color: red;
            /*position: relative;*/
            /*margin-top: 440px;*/
            /*margin-left: 20px;*/
             clear: both;
        }
        #small div{
            margin-right: 4px;
            display: inline-block;
            margin-top: 5px;

        }
        #div1{
            margin-left: 5px;
            height: 40px;
            width: 50px;
            background-color: blue;
        }
        #div2{
            height: 40px;
            width: 50px;
            background-color: blue;
        }
        #div3{
            height: 40px;
            width: 50px;
            background-color: blue;
        }
        #div4{
            height: 40px;
            width: 50px;
            background-color: blue;
        }

    </style>
</head>
<body>
<div id="container">
    <div id="picture">
        <img src="1.jpg" alt=""/>
        <div id="drag"></div>
    </div>
    <div id="big">
        <div id="big-picture">
            <img src="2.jpg" alt=""/>
        </div>
    </div>
    <div id="content">this is content</div>
    <div id="small">
        <!--<div id="div1"></div>-->
        <!--<div id="div2"></div>-->
        <!--<div id="div3"></div>-->
        <!--<div id="div4"></div>-->
    </div>
</div>
<script>
    var oContainer = document.getElementById('container')
    var oDrag = document.getElementById('drag')
    var oPicture = document.getElementById('picture')
    var oBigPicture = document.getElementById('big-picture')
    var oBig = document.getElementById('big')
    oPicture.onmousemove = function(event){
        oDrag.style.display = 'block'
        oBig.style.display = 'block'
        event = event || window.event
        var iLeft= event.clientX - oContainer.offsetLeft - oPicture.offsetLeft - oDrag.offsetWidth/2
        if(iLeft < 0)
        iLeft = 0
        if(iLeft > oPicture.offsetWidth/2)
        iLeft = oPicture.offsetWidth/2
        oDrag.style.left = iLeft + 'px'
        var iTop = event.clientY - oContainer.offsetTop - oPicture.offsetTop - oDrag.offsetHeight/2
        if(iTop < 0)
            iTop  = 0
        if(iTop  > oPicture.offsetHeight/2)
            iTop  = oPicture.offsetHeight/2
        oDrag.style.top = iTop + 'px'

        var bigLeft = (iLeft / oPicture.offsetWidth) * oBigPicture.offsetWidth
        oBigPicture.style.left = - bigLeft + 'px'
        var bigTop = (iTop / oPicture.offsetHeight) * oBigPicture.offsetHeight
        oBigPicture.style.top = - bigTop + 'px'

    }
    oPicture.onmouseout = function(event) {
        oDrag.style.display = 'none'
        oBig.style.display = 'none'
    }
</script>
</body>
</html>