seajs.use(["~slider@2","~box@1","~timer@1","~lazyload@1","~roll@1","~pagelet@1.x","~url@1"],function(e,o,n,t,r,a,i){var s="fn-hide",l="hide",d="js-lastest-goods",f=0,c=0,u=0,g=0,h=-1,m=null,v={renderTopBanner:function(){new e({autoStart:"true",container:"#top_banner",bannerHeight:"440",interval:5e3})},renderAModelBanner:function(){for(var o=0;c>o;o++){new e({autoStart:"false",container:".js-a-model-banner-"+o,isArrowAlwaysShow:"true",bannerWidth:"480",bannerHeight:"250"})}},renderBModelBanner:function(){for(var o=1;u>=o;o++){new e({autoStart:"false",container:".js-b-model-banner-"+o,isArrowAlwaysShow:"true",bannerWidth:"720",bannerHeight:"250"})}},renderRoll:function(){var e=new r({selector:"#roll_news",itemHeight:22,viewCount:4});e.start()},renderSnow:function(){seajs.use(["module/effect/snow"],function(e){e.init({classNamePrefix:"i-cd-",classCount:7,margin:20})})},renderLastestGoods:function(){var e=$("."+d);e.find("img[data-original]").lazyload({effect:"fadeIn"}),e.removeClass(d)},goToFloor:function(e){var o=$(".js-floor-"+e).length;return o>0?($(".js-floor-"+e).get(0).scrollIntoView(!0),g=0,!0):!1},preRenderBModel:function(){var e=u;u=$(".js-floor").size(),this.renderBModelBanner(e+1,u)},setupFloorsWidget:function(){var e=this,o=$("#category_widget"),n=o.data("text-class"),t=o.data("icon-class"),r="on",a=!$.support.leadingWhitespace,i="scrollIntoView"in document.createElement("div")&&!a;$(".js-floor-toggle").parent().on("click",".js-floor-toggle",function(o){if(i){o.preventDefault();var n=$(this),t=n.data("floor");if(g=t,e.goToFloor(t))return!1;u>0&&t>=h?$("#b_model_virtual").get(0).scrollIntoView(!0):$("#b_model").get(0).scrollIntoView(!0)}});var s=function(e){e.length&&e.removeClass(e.data("icon-class")).addClass(e.data("text-class")).removeClass(t).addClass(n).text(e.data("text"))},d=function(e){e.length&&e.removeClass(e.data("text-class")).addClass(e.data("icon-class")).removeClass(n).addClass(t).text("")},f=function(e){var o=$(".js-floor-toggle-"+e),n=$(".js-floor-toggle").parent().siblings("."+r).find(".js-floor-toggle");o.is(n)||(o.parent().is("."+r)||(s(o),o.parent().addClass(r)),n.length&&(d(n),n.parent().removeClass(r)))};$(".js-floor-toggle").each(function(){$(this).parent().hover(function(){var e=$(this);if(!e.is("."+r)){var o=e.find(".js-floor-toggle");s(o)}},function(){var e=$(this);if(!e.is("."+r)){var o=$(this).find(".js-floor-toggle");d(o)}})});var c=($("body"),o.height()),m=$("#header_banner").height()||0,v=$("#common_banner_top").height()||0,p=v+m+620,_=v+m+1788,w=555,b=532,j=$.map(G_CATEGORY_WIDGET,function(e,o){return _+w*o});$(window).on("scroll",function(){for(var e=document.documentElement.scrollTop||document.body.scrollTop,n=G_CATEGORY_WIDGET.length+1,t=!1,r=n;r>=1;r--)if(e+16+w/2>j[r-1]){f(r),t=!0;break}if(t||f(1),!a){var i=$(window).height(),s=0,d=p-e+16,u=Math.floor((i-c)/2);s=u>d?u:d,e+s+c>j[n-1]+b+c/3||s+c>i?o.addClass(l):(o.css("bottom",i-c-s),o.removeClass(l))}}),a&&o.css("bottom",Math.floor(($(window).height()-c)/2)).removeClass(l),setTimeout(function(){$(window).trigger("scroll")},0)},queryClientInfo:function(){var e="main/get_client_info.json";$.get(e,function(e){if(0==e.retcode){var o=e.platform;("h5"==o||"app"==o)&&(location.href="//m.fenqile.com")}else G_BOX.showError(e.retcode,e.retmsg)})},judgePlatform:function(){var e=i.parse(),o=e._s;o&&"h5"==o.toLowerCase()||this.queryClientInfo()},resetSize:function(e){e.css("height","auto")},modelBRender:function(e){u=$(".js-floor").size(),this.preRenderBModel(),this.renderLastestGoods(),this.resetSize(e),g>0&&this.goToFloor(g)},bindLazyload:function(e){$(e).find(".js-lazyload[data-original]").lazyload({effect:"fadeIn"})},bindEvent:function(){var e=this,o="#limit_sale",n="#a_model",t="#b_model",r="#b_model_virtual",a="#c_model",i=$("#btn_fb_top"),l=$("#btn_feedback");$(o).on("pagelet-lazyload-onload",function(){m=$("#switch_limit_list"),e.renderLastestGoods(),e.resetSize($(this))}),$(n).on("pagelet-lazyload-onload",function(){c=$(".js-a-model").size(),e.renderAModelBanner(),e.renderLastestGoods(),e.resetSize($(this))}),$(t).on("pagelet-lazyload-onload",function(){e.modelBRender($(this))}),$(r).on("pagelet-lazyload-onload",function(){var o=$(this);h=o.find(".js-floor").first().data("floor"),e.modelBRender(o)}),$(a).on("pagelet-lazyload-onload",function(){e.bindLazyload(a),e.resetSize($(this))}),$(a).on("click","#next_group_btn",function(){var o=$(".js-next-group");o.addClass(s);var n=o.size();f++,f==n&&(f=0),o.eq(f).removeClass(s),e.bindLazyload(a)}),i.on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"fast")}),l.on("click",function(e){e.preventDefault(),G_BOX.showIframe({title:"反馈建议",width:750,height:350,url:"/feedback/index.html"})})},renderView:function(){this.renderRoll(),this.renderTopBanner(),this.setupFloorsWidget()},sendSpeed:function(){seajs.use(["~speed@1"],function(e){new e({domainId:16,pageId:1,timePoint:G_SPEED_POINT_TIME})})},bindError:function(){var e=FQL.ErrorLogger.getLogger("index");e.bindError("910120001")},initParams:function(){G_SPEED_POINT_TIME.LOGIC={ID:5,DATA:[G_PAGE_LOAD_TIME,(new Date).getTime()]},window.G_BOX=new o},init:function(){this.judgePlatform(),this.renderView(),this.initParams(),this.bindError(),this.bindEvent(),this.sendSpeed()}};v.init()});
//# sourceMappingURL=/res/static/index/index.js.map